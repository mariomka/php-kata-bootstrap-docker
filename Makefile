build:
	docker build -t mariomka/php-kata:1.0 .
	docker run --rm -v $(shell pwd):/var/kata mariomka/php-kata:1.0 composer install

test:
	docker run --rm -v $(shell pwd):/var/kata mariomka/php-kata:1.0 ./vendor/bin/phpunit

coverage:
	docker run --rm -v $(shell pwd):/var/kata mariomka/php-kata:1.0 ./vendor/bin/phpunit --coverage-text

clean:
	docker ps -a | awk '{ print $$1,$$2 }' | grep mariomka/php-kata:1.0 | awk '{print $$1 }' | xargs -I {} docker rm {}
	docker rmi mariomka/php-kata:1.0
